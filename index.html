<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mdps</title>

    <link rel="stylesheet" href="css/style.css"></link>

    <script src="https://api-maps.yandex.ru/2.1?lang=ru_UA&apikey=d66fa902-dca1-4bcd-9837-95379df8782e" type="text/javascript"></script>
</head>
<body>
    <div class=yandex_map id="myMap" style='height: 600px; width: 400px'>

    <script>
        ymaps.ready(init);
        function init(){
            var myMap = new ymaps.Map ('myMap', {
                center: [56.19, 44.00],
                zoom: 10,
                controls: ['geolocationControl', 'trafficControl']
                });
            
                let placemark = null;
                let coords = null;

                // Кнопка для добавления метки
                let addButton = document.createElement('button');
                addButton.textContent = 'Добавить метку';
                document.body.appendChild(addButton);

                addButton.addEventListener('click', () => {
                    if (placemark) {
                        myMap.geoObjects.remove(placemark);
                        placemark = null;
                        coords = null;
                        addButton.textContent = 'Добавить метку';
                    }
                    myMap.events.add('click', handleMapClick);
                    addButton.textContent = 'Подтвердить';
                });

                function handleMapClick(e) {
                    coords = e.get('coords');
                    myMap.events.remove('click', handleMapClick);
                    addButton.textContent = 'Добавить метку'; // Возвращаем текст на кнопку
                    // Покажем подтверждение
                    if (confirm("Добавить метку в точку [" + coords[0].toFixed(6) + ", " + coords[1].toFixed(6) + "]?")) {
                        placemark = new ymaps.Placemark(coords, {
                            hintContent: 'Метка',
                            balloonContent: 'тут стоят пидарасы с палкой'
                        }, {
                            //iconLayout: 'default#imageWithContent',
                            //iconImageHref: '../dps.svg',
                            //iconImageSize: [48, 40],
                            //iconImageOffset: [-24, -40]
                            preset: 'twirl#blueStretchyIcon'
                        });
                        myMap.geoObjects.add(placemark);
                    }
                }

            
        }
    </script>
</div>
</body>
</html>
